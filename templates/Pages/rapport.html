<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="Application pour flipo-richir">
    <meta name="theme-color" content="#317EFB"/>
    <link rel="manifest" href="/manifest.json">
    <link rel="shortcut icon" href="./img/icon.png" type="image/png">
    <link rel="stylesheet" href="/Style/rapport.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.1.0/css/all.min.css">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH" crossorigin="anonymous">
    <title>Rapport d'intervention</title>
</head>
<body>
  <div id="formContent">
    <nav>
      <div class="image">
        <a href="Menu.html">
          <img src="/img/logo.png" alt="logo">
        </a>
      </div>
      <div>
        <h4 class="center">RAPPORT D'INTERVENTION</h4>
        <h5 class="center">(Feuille d'attachement)</h5>
      </div>
      <div class="image">
        <img src="/img/a.jpg" alt="desc">
      </div>
    </nav>
    <main>
      <form action="" method="post" class="p-4 border rounded">
        <div class="row mb-3">
          <div class="col">
            <label for="reference">FR</label>
            <input type="number" id="ref" class="form-control" disabled>
          </div>
          <div class="col">
            <label for="Date">Date</label>
            <input type="date" class="form-control" required>
          </div>
          <div class="col">
            <label for="N° D'intervention">N° d'enregistrement</label>
            <input type="number" class="form-control" required>
          </div>
        </div>
        <br>
        <div class="row mb-3">
          <h3 class="center">Coordonnées Utilisateur</h3>
          <div class="col">
            <label for="Client">Utilisateur</label>
            <input type="text" class="form-control" required>
          </div>
          <div class="col">
            <label for="Objet">Email Utilisateur</label>
            <input type="email" class="form-control" required>
          </div>
          <div class="col">
            <label for="Objet">N° de télephone</label>
            <input type="number" class="form-control" required>
          </div>
        </div>
        <br>
        <div class="row mb-3">
          <h3 class="center">Coordonnées Client</h3>
          <div class="col">
            <label for="Client">Client</label>
            <input type="text" class="form-control" required>
          </div>
          <div class="col">
            <label for="Objet">Email interlocuteur</label>
            <input type="email" class="form-control" required>
          </div>
          <div class="col">
            <label for="Objet">N° de télephone</label>
            <input type="number" class="form-control" required>
          </div>
        </div>
        <div class="row mb-3">
          <div class="col">
            <label for="adresse">Adresse</label>
            <input type="text" class="form-control" required>
          </div>
          <div class="col" id="in">
            <label for="nom d'agent">Intervenant(s)</label>
            <input type="text" class="form-control" required>
            <button class="btn btn-secondary" id="int">+</button> 
          </div>
          <div class="col">
            <label for="N° D'intervention">N° de dévis</label>
              <input type="number" class="form-control">
          </div>
        </div>
        <br>
        <div class="row mb-3">
          <div class="col">
            <label for="Objet">Objet</label>
            <input type="text" class="form-control" required>
          </div>
          <div class="col">
            <label for="Objet">Nombres d'heures de la machine</label>
            <input type="number" class="form-control" required>
          </div>
          <div class="col">
            <label for="Objet">Puissance</label>
            <input type="number" class="form-control" required>
          </div>
        </div>
        <br>
        <div class="row mb-3">
          <h3 class="center">Descriptif matériel</h3>
          <div class="col">
            <label for="Famille">Famille activité</label>
            <input type="text" class="form-control" required>
          </div>
          <div class="col">
            <label for="Type">Type d'activité</label>
            <input type="text" class="form-control" required>
          </div>
        </div>
        <div class="row mb-3">
          <legend>Moteur</legend>
          <div class="col">
            <label for="marque">Marque</label>
            <select id="marque" name="marque" size="1" class="form-select">
              <option value="">-- Choisir une marque --</option>
            </select>
            <input type="text" id="new-marque" name="new-marque" class="form-control" style="display: none;">
          </div>
          <div class="col">
            <label for="type">Type</label>
            <select id="type" name="type" size="1" class="form-select">
              <option value="">-- Choisir un type --</option>
            </select>
            <input type="text" id="new-°" name="new-°
            " class="form-control" style="display: none;">
          </div>
          <div class="col">
            <label for="type">N°</label>
            <select id="type" name="type" size="1" class="form-select">
              <option value="">-- Choisir un N° --</option>
            </select>
            <input type="text" id="new-type" name="new-type" class="form-control" style="display: none;">
          </div>
          <div class="col-12">
            <button id="add-button" type="submit" name="add-button" class="btn btn-primary">Ajouter</button>
            <button id="modify-button" type="submit" name="modify-button" class="btn btn-secondary" style="display: none;">Modifier</button>
          </div>
        </div>
        <div class="row mb-3">
          <legend>Alternateur</legend>
          <div class="col">
            <label for="marque">Marque</label>
            <select id="marque" name="marque" size="1" class="form-select">
              <option value="">-- Choisir une marque --</option>
              <?php
              $req = $bdd->query('SELECT DISTINCT marque FROM groupe');
              while ($donnees = $req->fetch()) {
                echo '<option value="' . $donnees['marque'] . '">' . $donnees['marque'] . '</option>';
              }
              $req->closeCursor();
              ?>
            </select>
            <input type="text" id="new-marque" name="new-marque" class="form-control" style="display: none;">
          </div>
          <div class="col">
            <label for="type">Type</label>
            <select id="type" name="type" size="1" class="form-select">
              <option value="">-- Choisir un type --</option>
              <?php
              $req = $bdd->query('SELECT DISTINCT type FROM groupe');
              while ($donnees = $req->fetch()) {
                echo '<option value="' . $donnees['type'] . '">' . $donnees['type'] . '</option>';
              }
              $req->closeCursor();
              ?>
            </select>
            <input type="text" id="new-°" name="new-°
            " class="form-control" style="display: none;">
          </div>
          <div class="col">
            <label for="type">N°</label>
            <select id="type" name="type" size="1" class="form-select">
              <option value="">-- Choisir un N° --</option>
              <?php
              $req = $bdd->query('SELECT DISTINCT type FROM groupe');
              while ($donnees = $req->fetch()) {
                echo '<option value="' . $donnees['N°'] . '">' . $donnees['N°'] . '</option>';
              }
              $req->closeCursor();
              ?>
            </select>
            <input type="text" id="new-type" name="new-type" class="form-control" style="display: none;">
          </div>
          <div class="col-12">
            <button id="add-button" type="submit" name="add-button" class="btn btn-primary">Ajouter</button>
            <button id="modify-button" type="submit" name="modify-button" class="btn btn-secondary" style="display: none;">Modifier</button>
          </div>
        </div>
        <div class="row mb-3">
          <legend>Transformateur</legend>
          <div class="col">
            <label for="marque">Marque</label>
            <select id="marque" name="marque" size="1" class="form-select">
              <option value="">-- Choisir une marque --</option>
              <?php
              $req = $bdd->query('SELECT DISTINCT marque FROM groupe');
              while ($donnees = $req->fetch()) {
                echo '<option value="' . $donnees['marque'] . '">' . $donnees['marque'] . '</option>';
              }
              $req->closeCursor();
              ?>
            </select>
            <input type="text" id="new-marque" name="new-marque" class="form-control" style="display: none;">
          </div>
          <div class="col">
            <label for="type">Type</label>
            <select id="type" name="type" size="1" class="form-select">
              <option value="">-- Choisir un type --</option>
              <?php
              $req = $bdd->query('SELECT DISTINCT type FROM groupe');
              while ($donnees = $req->fetch()) {
                echo '<option value="' . $donnees['type'] . '">' . $donnees['type'] . '</option>';
              }
              $req->closeCursor();
              ?>
            </select>
            <input type="text" id="new-°" name="new-°
            " class="form-control" style="display: none;">
          </div>
          <div class="col">
            <label for="type">N°</label>
            <select id="type" name="type" size="1" class="form-select">
              <option value="">-- Choisir un N° --</option>
              <?php
              $req = $bdd->query('SELECT DISTINCT type FROM groupe');
              while ($donnees = $req->fetch()) {
                echo '<option value="' . $donnees['N°'] . '">' . $donnees['N°'] . '</option>';
              }
              $req->closeCursor();
              ?>
            </select>
            <input type="text" id="new-type" name="new-type" class="form-control" style="display: none;">
          </div>
          <div class="col-12">
            <button id="add-button" type="submit" name="add-button" class="btn btn-primary">Ajouter</button>
            <button id="modify-button" type="submit" name="modify-button" class="btn btn-secondary" style="display: none;">Modifier</button>
          </div>
        </div>
        <br>
        <div class="row mb-3">
          <div class="col">
            <label for="Compte rendu">Compte rendu</label>
            <textarea id="text-to-read" class="form-control" required></textarea>
            <i class="fas fa-microphone mic"></i>
          </div>
        </div>
        <br>
        <h3 class="center"> PDP</h3>
        <div class="row mb-3">
          <div class="col">
            <div class="form-check">
              <input type="checkbox" id="remember1" name="remember" class="form-check-input">
              <label class="form-check-label" for="remember">PDP annuel pris en compte</label>
            </div>
          </div>
          <div class="col">
            <div class="form-check">
              <input type="checkbox" id="check1" name="remember" class="form-check-input">
              <label class="form-check-label" for="check">PDP / PPSPS ponctuel</label>
            </div>
          </div>
          <div class="col">
            <div class="form-check">
              <input type="checkbox" id="remember3" name="remember" class="form-check-input">
              <label class="form-check-label" for="remember">Analyse de risque</label>
            </div>
          </div>
        </div>
        <br>
        <h3 class="center">FOURNITURES</h3>
        <div class="row mb-3">
          <div class="col-12">
            <table class="table table-bordered" id="inputTable">
              <thead>
                <tr>
                  <th>Quantité</th>
                  <th>Référence / Désignation</th>
                </tr>
              </thead>
              <tbody>
                <tr>
                  <td><input type="number" class="form-control" id="quantite1"></td>
                  <td><input type="text" class="form-control" id="designation1"></td>
                </tr>
                <tr>
                  <td><input type="number" class="form-control" id="quantite2"></td>
                  <td><input type="text" class="form-control" id="designation2"></td>
                </tr>
              </tbody>
            </table>
            <button class="btn btn-secondary" id="addRow">+</button>
          </div>
        </div>
        <div class="row mb-3">
          <div class="col text-center">
            <h3>Horaire</h3>
          </div>
          <div id="form-sections">
            <div class="row">
              <div class="col">
                <label for="Temps d'Aller" class="form-label">Temps de Route Aller</label>
                <p id="Aller"></p>
                <input type="range" class="form-range" id="aller" min="0" max="24" step="0.25" required>
              </div>
              <div class="col">
                <label for="tempsTravail">Temps de Travail</label>
                <p id="Travail"></p>
                <input type="range" class="form-range" id="travail" min="0" max="24" step="0.25" required>
              </div>
              <div class="col">
                <label for="tempsRouteRetour">Temps de Retour</label>
                <p id="Retour"></p>
                <input type="range" class="form-range" id="retour" min="0" max="24" step="0.25" required>
              </div>
            </div>
            <br>
            <div class="row">
              <div class="col">
                <label for="Km">Nombre de Km</label>
                <input type="number" class="form-control">
              </div>
              <div class="col">
                <label for="forfait">Nombre de forfait</label>
                <input type="number" class="form-control">
              </div>
            </div>
            <div class="row">
              <div class="col">
                <label for="hebergements">Nombre d'hébergements</label>
                <input type="number" class="form-control">
              </div>
              <div class="col">
                <label for="repas">Nombre de repas</label>
                <input type="number" class="form-control">
              </div>
              <div class="col">
                <label for="divers">Divers</label>
                <input type="text" class="form-control">
              </div>
            </div>
            <button class="btn btn-secondary" id="addSection">+</button>
          </div>
        </div>
        <br>
        <div class="row mb-3">
          <div class="col">
            <label for="attachment">Joindre un fichier</label>
              <input type="file" id="attachment" accept=".jpg, .png, .pdf" class="form-control-file">
          </div>
          <div class="col">
            <div class="form-check">
              <input type="checkbox" id="danger">
              <label class="form-check-label" for="check">Une situation dangereuse constatée?</label>
            </div>
            <div class="col" hidden>
              <label for="description">Description de la situation dangereuse</label>
              <textarea class="form-control" id="danger-description" rows="2"></textarea>
            </div>
          </div>
          <br>
          <div class="col">
            <label>
              <i id="open-camera-btn" class="fas fa-camera"></i>Prendre une photo
            </label>
            <input type="file" id="camera-input" accept="image/*" capture="environment" style="display:none;">
            <br>
            <img id="captured-img" alt="Image capturée" style="display:none;">
            <input type="hidden" id="captured-img-data">
          </div>
        </div>
        <br>
        <div class="row mb-3">
          <div class="col">
            <h3 class="text-center">Évaluation de la part du client</h3>
            <div class="rating">
              <div class="row">
                <div class="col">
                  <label for="séc">Niveau Satisfaction sécurité</label>
                  <div class="star-rating">
                    <input type="radio" id="star1" name="sec" value="1"><label for="star1" class="star">&#9733;</label>
                    <input type="radio" id="star2" name="sec" value="2"><label for="star2" class="star">&#9733;</label>
                    <input type="radio" id="star3" name="sec" value="3"><label for="star3" class="star">&#9733;</label>
                    <input type="radio" id="star4" name="sec" value="4"><label for="star4" class="star">&#9733;</label>
                    <input type="radio" id="star5" name="sec" value="5"><label for="star5" class="star">&#9733;</label>
                  </div>
                </div>
                <div class="col">
                  <label for="int">Niveau Satisfaction intervention</label>
                  <div class="star-rating">
                    <input type="radio" id="star6" name="int" value="6"><label for="star6" class="star">&#9733;</label>
                    <input type="radio" id="star7" name="int" value="7"><label for="star7" class="star">&#9733;</label>
                    <input type="radio" id="star8" name="int" value="8"><label for="star8" class="star">&#9733;</label>
                    <input type="radio" id="star9" name="int" value="9"><label for="star9" class="star">&#9733;</label>
                    <input type="radio" id="star10" name="int" value="10"><label for="star10" class="star">&#9733;</label>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
        <br>
        <div class="row mb-3">
          <div class="col">
            <label for="Objet">Observations du client</label>
            <textarea class="form-control"></textarea>
          </div>
          <div class="col">
            <label for="Compte rendu">Remontée d'information</label>
            <textarea class="form-control"></textarea>
          </div>
          <div class="col">
            <label for="Objet">Remontée sécurite /HSE</label>
            <textarea rows="1" class="form-control"></textarea>
          </div>
        </div>
        <br>
        <div class="row mb-3">
          <h3 class="center">Signature</h3>
          <div class="col-6">
            <div class="mb-3">
              <label for="nom_agent">Nom d'Intervenant</label>
              <input type="text" id="nom_agent" class="form-control" required>
              <label for="sign_agent">Signature d'Intervenant:</label>
              <div class="signature-pad">
                <svg class="signature-svg" required></svg>
                <button class="clear-button">Retenter</button>
              </div>
            </div>
          </div>
          <div class="col-6">
            <div class="mb-3">
              <label for="nom_client">Nom d'interlocuteur</label>
              <input type="text" id="nom_client" class="form-control" required>
              <label for="sign_client">Signature client:</label>
              <div class="signature-pad">
                <svg class="signature-svg" required></svg>
                <button class="clear-button">Retenter</button>
              </div>
            </div>
          </div>
        </div>
        <div class="row mb-3">
          <div class="col-6">
            <div class="form-check">
              <input type="checkbox" id="remember" name="remember" class="form-check-input">
              <label class="form-check-label" for="remember">Dévis complémentaire, suites à donner</label>
            </div>
          </div>
          <div class="col-6">
            <div class="form-check">
              <input type="checkbox" id="check" name="remember" class="form-check-input">
              <label class="form-check-label" for="check">Prestation terminée</label>
            </div>
          </div>
        </div>
        <div class="row mb-3">
          <div class="col d-flex justify-content-end">
            <button type="reset" onclick="return réinitialiser()" class="btn btn-secondary me-2">Réinitialiser</button>
            <button id="pdfButton"  type="submit" class="btn btn-primary">Continuer</button>
          </div>
        </div>
      </form>
    </main>
  </div>
  <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/popper.js@1.16.1/dist/umd/popper.min.js"></script>
  <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/js/bootstrap.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/1.5.3/jspdf.debug.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.3.1/jspdf.umd.min.js"></script>
  <script src="https://html2canvas.hertzen.com/dist/html2canvas.min.js"></script>
  <script src="/js/main.js"></script>
</body>
</html>